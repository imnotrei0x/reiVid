<!DOCTYPE html>
<html>
<head>
    <title>reiVid</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="icon" type="image/png" href="/assets/logo.png">
    <meta name="msapplication-TileImage" content="/assets/favicon.ico">
    <meta property="og:image" content="/assets/logo.png">
    <link rel="stylesheet" href="/styles/styles.css">
    <style>
        .fade-out {
            opacity: 0 !important;
            transition: opacity 0.3s ease-out;
        }
        
        #landing {
            opacity: 1;
            transition: opacity 0.3s ease-in;
        }
    </style>
    <script>
        function handleFileSelect() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'video/*';
            fileInput.style.display = 'none';
            
            fileInput.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const maxSize = 100 * 1024 * 1024; 
                    if (file.size > maxSize) {
                        alert('File is too large. Maximum size is 100MB');
                        return;
                    }
                    
                    try {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            try {
                                sessionStorage.setItem('pendingVideo', e.target.result);
                                
                                const landing = document.getElementById('landing');
                                landing.classList.add('fade-out');
                                
                                setTimeout(() => {
                                    window.location.href = '/editor.html';
                                }, 300);
                            } catch (error) {
                                alert('Error preparing video. Please try a smaller file.');
                                console.error('Storage error:', error);
                            }
                        };
                        reader.readAsDataURL(file);
                    } catch (error) {
                        alert('Error preparing video. Please try a smaller file.');
                        console.error('Storage error:', error);
                    }
                }
            };
            
            fileInput.click();
        }

        window.addEventListener('load', () => {
            sessionStorage.removeItem('pendingVideo');
        });
    </script>
</head>
<body>
    <div class="container" id="landing">
        <div class="header">
            <img src="/assets/logo.png" alt="reiVid" class="logo">
            <h1>reiVid</h1>
        </div>
        <p class="description">trim and crop videos in your browser</p>
        <button class="upload-button" onclick="handleFileSelect()">Select Video</button>
        
        <div class="footer-links">
            <a href="/about.html">about</a>
            <a href="/donate.html">donate</a>
            <a href="/terms.html">terms</a>
            <a href="/privacy.html">privacy</a>
        </div>
    </div>
</body>
</html>